<!DOCTYPE html><html lang="[&quot;en&quot;,&quot;default&quot;]"><head><meta name="generator" content="Hexo 3.9.0"><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description"><title>Phonon spectra of diamond | Dong Fan's Blog</title><link rel="stylesheet" type="text/css" href="/css/style.css?v=0.0.0"><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/normalize/8.0.1/normalize.min.css"><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/pure/1.0.0/pure-min.css"><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/pure/1.0.0/grids-responsive-min.css"><link rel="stylesheet" href="//lib.baomitu.com/font-awesome/4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//lib.baomitu.com/jquery/3.4.0/jquery.min.js"></script><link rel="icon" mask sizes="any" href="/favicon.ico"><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">Phonon spectra of diamond</h1><a id="logo" href="/.">Dong Fan's Blog</a><p class="description">A lot of things need to be written down</p></div><div id="nav-menu"><a class="current" href="/."><i class="fa fa-home"> Home</i></a><a href="/archives/"><i class="fa fa-archive"> Archive</i></a></div></div><div class="pure-g" id="layout"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">Phonon spectra of diamond</h1><div class="post-meta">Aug 9, 2019<span> | </span><span class="category"><a href="/categories/Training/">Training</a></span></div><div class="post-content"><h3 id="1-Structural-optimization-primitive-cell-of-diamond"><a href="#1-Structural-optimization-primitive-cell-of-diamond" class="headerlink" title="1. Structural optimization (primitive cell of diamond)"></a>1. Structural optimization (primitive cell of diamond)</h3><p>Please prepare the following files except the POTCAR (using vpot.py)</p>
<ul>
<li><p>INCAR:</p>
<figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">System</span> = relax_diamond</span><br><span class="line"><span class="attr">PREC</span> = N</span><br><span class="line"><span class="attr">ENCUT</span> = <span class="number">500</span></span><br><span class="line"><span class="attr">EDIFF</span> = <span class="number">1</span>e-<span class="number">4</span></span><br><span class="line"><span class="attr">EDIFFG</span> = -<span class="number">0.01</span></span><br><span class="line"><span class="attr">IBRION</span> = <span class="number">2</span></span><br><span class="line"><span class="attr">ISIF</span> = <span class="number">3</span></span><br><span class="line"><span class="attr">NSW</span> = <span class="number">100</span></span><br><span class="line"><span class="attr">NPAR</span> = <span class="number">4</span></span><br><span class="line"><span class="attr">ISMEAR</span> = <span class="number">0</span></span><br><span class="line"><span class="attr">SIGMA</span> = <span class="number">0.05</span></span><br><span class="line"><span class="attr">LCHARG</span> = F</span><br><span class="line"><span class="attr">LWAVE</span> = F</span><br></pre></td></tr></table></figure>
</li>
<li><p>POSCAR:</p>
<figure class="highlight lsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">primitive cell-Diamond</span><br><span class="line"><span class="number">1.0</span></span><br><span class="line">        <span class="number">2.5269939899</span>         <span class="number">0.0000000000</span>         <span class="number">0.0000000000</span></span><br><span class="line">        <span class="number">1.2634969950</span>         <span class="number">2.1884409905</span>         <span class="number">0.0000000000</span></span><br><span class="line">        <span class="number">1.2634969950</span>         <span class="number">0.7294803302</span>         <span class="number">2.0632819528</span></span><br><span class="line">    C</span><br><span class="line">    <span class="number">2</span></span><br><span class="line">Direct</span><br><span class="line">     <span class="number">0.249999998</span>         <span class="number">0.249999996</span>         <span class="number">0.250000007</span></span><br><span class="line">     <span class="number">0.000000000</span>         <span class="number">0.000000000</span>         <span class="number">0.000000000</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>KPOINTS:</p>
<figure class="highlight lsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">K-points</span><br><span class="line"><span class="number">0</span></span><br><span class="line">M</span><br><span class="line"><span class="number">11</span>  <span class="number">11</span>  <span class="number">11</span></span><br><span class="line"> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>Use the <code>vpot.py</code> script to generate files automatically</p>
</li>
</ul>
<p>After sufficient structural optimization, you will get the final structure in CONTCAR</p>
<ul>
<li><p>CONTCAR:</p>
<figure class="highlight lsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">primitive cell-Diamond</span><br><span class="line">   <span class="number">1.00000000000000</span></span><br><span class="line">     <span class="number">2.5250599384000001</span>    <span class="number">0.0000000000000000</span>    <span class="number">0.0000000000000000</span></span><br><span class="line">     <span class="number">1.2625299692000000</span>    <span class="number">2.1867660527999999</span>    <span class="number">0.0000000000000000</span></span><br><span class="line">     <span class="number">1.2625299692000000</span>    <span class="number">0.7289220176000000</span>    <span class="number">2.0617028064000000</span></span><br><span class="line">   C</span><br><span class="line">     <span class="number">2</span></span><br><span class="line">Direct</span><br><span class="line">  <span class="number">0.2500000000000000</span>  <span class="number">0.2500000000000000</span>  <span class="number">0.2500000000000000</span></span><br><span class="line">  <span class="number">0.0000000000000000</span>  <span class="number">0.0000000000000000</span>  <span class="number">0.0000000000000000</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>Next, save the CONTCAR as POSCAR file</p>
</li>
</ul>
<h3 id="2-Pre-process"><a href="#2-Pre-process" class="headerlink" title="2. Pre-process"></a>2. Pre-process</h3><p>Create a new folder (<code>phon</code>) for phonon spectrum calculations<br>Four files need to be prepared：<code>POSCAR</code>、<code>INCAR</code>、<code>POTCAR</code>、and <code>KPOINTS</code></p>
<ul>
<li><p>INCAR:</p>
<figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">System</span> = phonon_diamond</span><br><span class="line"><span class="attr">PREC</span> = N</span><br><span class="line"><span class="attr">ENCUT</span> = <span class="number">500</span></span><br><span class="line"><span class="attr">IBRION</span> = <span class="number">8</span> </span><br><span class="line"><span class="attr">EDIFF</span> = <span class="number">1.0</span>e-<span class="number">08</span>  </span><br><span class="line"><span class="attr">ISMEAR</span> = <span class="number">0</span> </span><br><span class="line"><span class="attr">SIGMA</span> = <span class="number">0.1</span></span><br><span class="line"><span class="attr">LREAL</span> = .<span class="literal">FALSE</span>. </span><br><span class="line"><span class="attr">ADDGRID</span> = .<span class="literal">TRUE</span>.</span><br><span class="line"><span class="attr">LWAVE</span> = .<span class="literal">FALSE</span>. </span><br><span class="line"><span class="attr">LCHARG</span> = .<span class="literal">FALSE</span>.</span><br></pre></td></tr></table></figure>
</li>
<li><p>First, import the run environment</p>
<figure class="highlight lsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">module load phonopy/<span class="number">1.11</span><span class="number">.10</span><span class="number">.4</span></span><br></pre></td></tr></table></figure>

</li>
</ul>
<p>In the pre-process, supercell structures with (or without) displacements are created from a unit cell fully consiering crystal symmetry.</p>
<ul>
<li><p>To obtain supercells (2 × 2 × 2) with displacements, run phonopy:</p>
<figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">phonopy -d --<span class="keyword">dim</span>=<span class="string">"2 2 2"</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>You should ﬁnd the ﬁles, SPOSCAR, disp.yaml, and POSCAR-{number} as follows:</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">INCAR</span>  <span class="selector-tag">KPOINTS</span>  <span class="selector-tag">POSCAR</span>  <span class="selector-tag">POSCAR-001</span>  <span class="selector-tag">POTCAR</span>  <span class="selector-tag">SPOSCAR</span>  <span class="selector-tag">disp</span><span class="selector-class">.yaml</span>  <span class="selector-tag">phonopy_disp</span><span class="selector-class">.yaml</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>SPOSCAR is the perfect supercell structure, disp.yaml contains the information on displacements, and POSCAR-{number} are the supercells with atomic displacements. POSCAR-{number} corresponds to the different atomic displacements written in disp.yaml.</p>
</li>
</ul>
<h3 id="3-Calculation-of-sets-of-forces"><a href="#3-Calculation-of-sets-of-forces" class="headerlink" title="3. Calculation of sets of forces"></a>3. Calculation of sets of forces</h3><ul>
<li><p>Save the primitive cell of diamond to <code>primitive</code></p>
<figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">% cp POSCAR <span class="keyword">primitive</span><span class="title"></span></span><br></pre></td></tr></table></figure>
</li>
<li><p>Rename SPOSCAR created in (2) to POSCAR (POSCAR-{number} and disp.yaml ﬁles will never be used.)</p>
<figure class="highlight cos"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">% <span class="keyword">mv</span> SPOSCAR POSCAR</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h3 id="4-Submit-computational-task"><a href="#4-Submit-computational-task" class="headerlink" title="4. Submit computational task"></a>4. Submit computational task</h3><ul>
<li><p>After ﬁnishing the VASP calculation, conﬁrm vasprun.xml contains hessian elements, and then create FORCE_CONSTANTS, enter the following command in terminal</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">%</span><span class="bash"> phonopy --<span class="built_in">fc</span> vasprun.xml</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>You will see the following<br><img src="/2019/08/09/phon/phon.jpg" alt></p>
</li>
</ul>
<h3 id="5-Prepare-the-following-setting-ﬁle-named-with-band-conf"><a href="#5-Prepare-the-following-setting-ﬁle-named-with-band-conf" class="headerlink" title="5. Prepare the following setting ﬁle named with band.conf"></a>5. Prepare the following setting ﬁle named with <code>band.conf</code></h3><figure class="highlight lsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">ATOM_NAME = C</span><br><span class="line">FORCE_CONSTANTS = READ </span><br><span class="line">DIM = <span class="number">2</span> <span class="number">2</span> <span class="number">2</span> </span><br><span class="line">BAND =   <span class="number">0</span>  <span class="number">0</span>  <span class="number">0</span>  <span class="number">0.5</span> <span class="number">0</span>  <span class="number">0.5</span> <span class="number">0.625</span> <span class="number">0.25</span> <span class="number">0.625</span> <span class="number">0.375</span> <span class="number">0.375</span> <span class="number">0.75</span> <span class="number">0</span>  <span class="number">0</span>  <span class="number">0</span>  <span class="number">0.5</span> <span class="number">0.5</span> <span class="number">0.5</span>  <span class="number">0.5</span> <span class="number">0.25</span> <span class="number">0.75</span> <span class="number">0</span>  <span class="number">0</span>  <span class="number">0</span>   </span><br><span class="line">MP =  <span class="number">8</span> <span class="number">8</span> <span class="number">8</span></span><br><span class="line">PDOS = <span class="number">1</span></span><br></pre></td></tr></table></figure>

<h3 id="6-Run-phonopy-with-the-original-unit-cell-POSCAR-unitcell-and-setting-tag-FORCE-CONSTANTS-READ"><a href="#6-Run-phonopy-with-the-original-unit-cell-POSCAR-unitcell-and-setting-tag-FORCE-CONSTANTS-READ" class="headerlink" title="6. Run phonopy with the original unit cell POSCAR-unitcell and setting tag FORCE_CONSTANTS = READ"></a>6. Run phonopy with the original unit cell POSCAR-unitcell and setting tag FORCE_CONSTANTS = READ</h3><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">% phonopy --<span class="attr">dim=</span><span class="string">"2 2 2"</span> -c <span class="keyword">primitive</span><span class="title"> band</span>.conf</span><br><span class="line"><span class="comment"># or</span></span><br><span class="line">% phonopy -c <span class="keyword">primitive</span><span class="title"> -p</span> band.conf --<span class="attr">factor=</span><span class="number">521.471</span></span><br></pre></td></tr></table></figure>

<ul>
<li>You will see the following<br><img src="/2019/08/09/phon/phon-2.jpg" alt></li>
<li>Phonon partial density of states data is located in <code>partial_dos.dat</code></li>
</ul>
<h3 id="7-Export-the-original-data-file-named-with-band-dat"><a href="#7-Export-the-original-data-file-named-with-band-dat" class="headerlink" title="7. Export the original data file named with band.dat"></a>7. Export the original data file named with <code>band.dat</code></h3><figure class="highlight armasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">bandplot </span>--gnuplot <span class="keyword">band.yaml </span>&gt;<span class="keyword">band.dat</span></span><br></pre></td></tr></table></figure>

<p><img src="/2019/08/09/phon/phon-f.jpg" alt></p>
</div><div><ul class="post-copyright"><li class="post-copyright-author"><strong>Author: </strong>Dong Fan</li><li class="post-copyright-link"><strong>Blog Link: </strong><a href="/2019/08/09/phon/">http://agrh.github.io/2019/08/09/phon/</a></li><li class="post-copyright-license"><strong>Copyright Declaration: </strong>The author owns the copyright, please indicate the source reproduced.</li></ul></div><br><div class="tags"><a href="/tags/VASP/">VASP</a><a href="/tags/EN/">EN</a></div><div class="post-nav"><a class="next" href="/2019/08/07/project/">最终作业</a></div><div id="lv-container" data-id="city" data-uid="MTAyMC80NTU0Ni8yMjA1Nw=="><script>(function(d, s) {
   var j, e = d.getElementsByTagName(s)[0];
   if (typeof LivereTower === 'function') { return; }
   j = d.createElement(s);
   j.src = 'https://cdn-city.livere.com/js/embed.dist.js';
   j.async = true;
   e.parentNode.insertBefore(j, e);
})(document, 'script');
</script></div></div></div></div><div class="pure-u-1 pure-u-md-1-4"><div id="sidebar"><div class="widget"><form class="search-form" action="//www.google.com/search" method="get" accept-charset="utf-8" target="_blank"><input type="text" name="q" maxlength="20" placeholder="Search"><input type="hidden" name="sitesearch" value="http://agrh.github.io"></form></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> Categories</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Training/">Training</a><span class="category-list-count">14</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Travelling/">Travelling</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Work/">Work</a><span class="category-list-count">1</span></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> Tags</i></div><div class="tagcloud"><a href="/tags/CH/" style="font-size: 15px;">CH</a> <a href="/tags/VASP/" style="font-size: 15px;">VASP</a> <a href="/tags/EN/" style="font-size: 15px;">EN</a> <a href="/tags/Markdown/" style="font-size: 15px;">Markdown</a> <a href="/tags/Scripts/" style="font-size: 15px;">Scripts</a> <a href="/tags/Linux/" style="font-size: 15px;">Linux</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> Recent</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2019/08/09/phon/">Phonon spectra of diamond</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/08/07/project/">最终作业</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/08/06/ded/">差分电荷和Bader电荷分布</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/08/01/neb/">过渡态理论以及Ammonia flipping计算实例</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/07/31/ec/">晶体结构力学性能相关计算(VASP)</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/07/30/surface-dia/">金刚石（100）表面电子结构计算</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/07/29/modeling/">建模</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/07/28/band-diamond/">Calculate the band structure and density of states of diamond with the VASP code</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/07/27/scripts/">Some useful scripts</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/07/25/incar/">INCAR parameter of VASP</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-external-link"> Links</i></div><ul></ul><a href="http://fandong.xyz/" title="About me" target="_blank">About me</a><ul></ul><a href="https://www.researchgate.net/profile/Dong_Fan5" title="Researchgate" target="_blank">Researchgate</a><ul></ul><a href="https://scholar.google.com/citations?user=fq_Q0rkAAAAJ&amp;hl=en" title="Google Scholar" target="_blank">Google Scholar</a><ul></ul><a href="https://journals.aps.org/" title="APS" target="_blank">APS</a></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">Copyright © 2019 <a href="/." rel="nofollow">Dong Fan's Blog.</a> Powered by<a rel="nofollow" target="_blank" href="http://fandong.xyz"> Dong Fan.</a></div></div></div><a class="show" id="rocket" href="#top"></a><script type="text/javascript" src="/js/totop.js?v=0.0.0" async></script><script type="text/javascript" src="//lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=0.0.0" async></script><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css"><script type="text/javascript" src="/js/codeblock-resizer.js?v=0.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=0.0.0"></script></div></body></html>